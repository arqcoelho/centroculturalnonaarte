<!DOCTYPE html>
<html lang="en">
	<head>
		<!--projecttitle--><title>centroculturalnonaarte</title><!--projecttitle-end-->
		<!--projectdescription--><meta name="description" content="Project 3Sixty Baru"><!--projectdescription-end-->
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width, shrink-to-fit=no">
		
		<link rel="stylesheet" type="text/css" href="css/font-awesome.css">
		<link rel="stylesheet" type="text/css" href="style.css">
		
		<!-- Insert this line above script imports  -->
		<script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
		
		<script src="js/jquery.js"></script>
		<script src="js/imagedata.js"></script>
		
		<!-- Insert this line after script imports -->
		<script>if (window.module) module = window.module;</script>
		
		<style>
		
			
						
			/* SCROLLBAR STYLING */
			/* width */
			::-webkit-scrollbar {
				width: 0.25em;
				height: 0.25em;
			}
			/* Track */
			::-webkit-scrollbar-track {
				background: #2c3643; 
			}
			/* Handle */
			::-webkit-scrollbar-thumb {
				background: #0d9e59; 
				transition: background .5s;
			}
			/* Handle on hover */
			::-webkit-scrollbar-thumb:hover {
				background: #00e075; 
			}


			body {
				margin: 0;
				overflow: hidden;
			}
			#container {
				width: 100vw;
				height: 100vh;
				display: block;
			}
			#overlay {
				position: absolute;
				top: 0; left: 0;
				width: 100vw;
				height: 100vh;
				background-color: rgba(0, 0, 0, 0.8);
				color: white;
				font-size: 2rem;
				display: flex;
				justify-content: center;
				align-items: center;
				z-index: 10;
				opacity: 0;
				pointer-events: none;
				transition: opacity 0.5s ease;
			}
			
			#tmp{
				position: fixed;
				top: 0;
				left: 0; 
				right: 0;
				bottom: 0;
				padding: 3em;
				background-color: rgba(0,0,0,.5);
				backdrop-filter: blur(5px);
				display: none;
				z-index: 21;
			}
		</style>
	</head>
	<body id="body">
	    <div id="container"></div>
		<div id="overlay">Loading...</div>
    	
		
		
		<!--customhtml--><!--customhtml-end-->
		
		<div id="tmp">
			<div style="width: 100%; height: 100%; overflow: hidden; overflow-y: auto; box-sizing: border-box; position: relative;" id="tmpcontent"></div>
			<div class="mediaclosebutton" onclick="hideTemp()"><i class="fa fa-times-circle"></i></div>
		</div>


		<div id="loading" class="fullwrapper" style="display: table; width: 100%; height: 100%;">
    		<div style="display: table-cell; vertical-align: middle; text-align: center; color: white; font-size: 30px; padding: 50px;">
    			<!--loadingtext-->Loading...<!--loadingtext-end-->
				<div id="loadingperc" style="font-size:12px;"></div>
    		</div>
    	</div>
		
		<!-- Three.js Core -->
		<script src="js/three.min.js"></script>
		<!-- OrbitControls -->
		<script src="js/OrbitControls.js"></script>
		
    	<script>
			
			let scene, camera, renderer, controls;
			let spriteHotspots = [];
			
			let panoramaMesh;

			let targetFov = 75;
			let initialFov = 75;
			let initialPinchDistance = null;

			const overlay = document.getElementById('overlay');
			const raycaster = new THREE.Raycaster();
			const mouse = new THREE.Vector2();

			init();
			animate();
			
			/*initfunction*/

		let currentPanorama = '1.jpg';
		function init() {
			const container = document.getElementById('container');

			scene = new THREE.Scene();

			camera = new THREE.PerspectiveCamera(targetFov, container.clientWidth / container.clientHeight, 0.1, 1000);
			camera.position.set(0, 0, 0.1);

			renderer = new THREE.WebGLRenderer({ antialias: true });
			renderer.setSize(container.clientWidth, container.clientHeight);
			container.appendChild(renderer.domElement);

			controls = new THREE.OrbitControls(camera, renderer.domElement);
			controls.enableZoom = true;
			controls.minDistance = 0.1;
			controls.maxDistance = 5;
			controls.enablePan = false;
			controls.rotateSpeed = -0.3;
			controls.enableDamping = true;
			controls.dampingFactor = 0.1;

			const geometry = new THREE.SphereGeometry(500, 60, 40);
			geometry.scale(-1, 1, 1);

			const texture = new THREE.TextureLoader().load('panoramas/1.jpg');
			const material = new THREE.MeshBasicMaterial({ map: texture });

			panoramaMesh = new THREE.Mesh(geometry, material);
			scene.add(panoramaMesh);

			loadHotspotsFor('1.jpg');

			window.addEventListener('resize', onWindowResize);
			renderer.domElement.addEventListener('wheel', onMouseWheel, { passive: false });
			renderer.domElement.addEventListener('touchstart', handleTouchStart, { passive: false });
			renderer.domElement.addEventListener('touchmove', handleTouchMove, { passive: false });
			renderer.domElement.addEventListener('pointermove', onPointerMove, false);
		}
		
/*initfunction-end*/

			function onMouseWheel(e) {
				e.preventDefault();
				targetFov += e.deltaY * 0.05;
				targetFov = THREE.MathUtils.clamp(targetFov, 30, 100);
			}

			function handleTouchStart(e) {
				if (e.touches.length === 2) {
					const dx = e.touches[0].pageX - e.touches[1].pageX;
					const dy = e.touches[0].pageY - e.touches[1].pageY;
					initialPinchDistance = Math.sqrt(dx * dx + dy * dy);
					initialFov = targetFov;
				}
			}

			function handleTouchMove(e) {
				if (e.touches.length === 2 && initialPinchDistance !== null) {
					e.preventDefault();
					const dx = e.touches[0].pageX - e.touches[1].pageX;
					const dy = e.touches[0].pageY - e.touches[1].pageY;
					const newDistance = Math.sqrt(dx * dx + dy * dy);
					const zoomFactor = initialPinchDistance / newDistance;
					targetFov = THREE.MathUtils.clamp(initialFov * zoomFactor, 30, 100);
				}
			}

			function loadHotspotsFor(panorama) {
				clearHotspots();
				/*panoramas*/

			if (panorama === '1.jpg') {
				addHotspot('images/white.png', new THREE.Vector3(-268.9378027495818, -35.0619873763606, -293.51145467595103), () => {
		switchPanorama('2.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(285.4816063258426, -36.44905740397569, -276.6047764042636), () => {
		switchPanorama('4.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(395.1043371540963, -37.804447265838434, -45.53668902580848), () => {
		switchPanorama('5.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(-130.47762468417145, -45.75953202663289, 374.4696230913957), () => {
		switchPanorama('7.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(-397.13184224628736, -14.674043053098117, 41.90099507800382), () => {
		switchPanorama('21.jpg');
	});
	addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(-397.47786768031995, -22.808857583014213, -27.512793867531748), () => {
		showMedia(1, 'images/BOBCUSPE.jpg');
	});
}

			if (panorama === '2.jpg') {
				addHotspot('images/white.png', new THREE.Vector3(329.7242035684509, -40.047669646905916, -221.20832582738274), () => {
		switchPanorama('1.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(-231.61540370757677, -44.282837958162226, -322.47097091651256), () => {
		switchPanorama('3.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(-136.96657714268255, -48.15755372301507, 371.63298086808084), () => {
		switchPanorama('8.jpg');
	});
}

			if (panorama === '3.jpg') {
				addHotspot('images/white.png', new THREE.Vector3(215.48969101839805, -46.092945526699445, 332.55533473651656), () => {
		switchPanorama('2.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(258.91035939351764, -44.78646547288982, -300.50043897800236), () => {
		switchPanorama('4.jpg');
	});
}

			if (panorama === '4.jpg') {
				addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(5.515273921123946, -52.75083880309633, -395.81936522815903), () => {
		showMedia(1, 'images/OTA.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(-302.9117994846915, -50.6320729051491, 254.79377698067827), () => {
		switchPanorama('3.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(322.01917398488615, -36.414752869257356, 234.1039869832964), () => {
		switchPanorama('1.jpg');
	});
	addHotspot('images/arrowup.png', new THREE.Vector3(-108.4965715947766, -43.93591621481284, 381.45429619534957), () => {
		switchPanorama('11.jpg');
	});
	addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(141.89127378790855, -95.84236871079463, 360.67230390975504), () => {
		showMedia(1, 'images/NÍQUELNÁUSEA.jpg');
	});
}

			if (panorama === '5.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-394.73082881401837, -63.094840850503275, 3.656143516192783), () => {
		switchPanorama('6.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(391.29750701269376, -33.936465030150714, -72.3068267464568), () => {
		switchPanorama('1.jpg');
	});
	addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(350.5400628924192, -60.40439479171899, 181.29017430949136), () => {
		showMedia(1, 'images/NÍQUELNÁUSEA.jpg');
	});
}

			if (panorama === '6.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(83.77395406354422, -42.42577814570992, -388.3806127877224), () => {
		switchPanorama('5.jpg');
	});
	addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(-303.71017211088133, -51.70262041353126, -253.60198522722698), () => {
		showMedia(1, 'images/CABEÇAOCA.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(-371.83093270670247, -38.854736395906656, -139.55728965877535), () => {
		switchPanorama('9.jpg');
	});
}

			if (panorama === '7.jpg') {
				addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(197.18880780837281, -161.4249511423086, 307.16265622409014), () => {
		showMedia(1, 'images/MENINOMALUQUINHO.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(-168.44752345992757, -50.57967234801803, -358.3802340773827), () => {
		switchPanorama('1.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(-218.91564708195853, -42.69172290612708, 330.8205084769854), () => {
		switchPanorama('19.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(395.6641427484567, -29.82216853417776, 47.365469810917915), () => {
		switchPanorama('9.jpg');
	});
}

			if (panorama === '8.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-259.2304872333136, -61.454622305992054, -297.81283475612616), () => {
		switchPanorama('2.jpg');
	});
	addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(184.66345432378617, -68.13660375536105, -347.2772945845471), () => {
		showMedia(1, 'images/MÔNICA.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(147.9839889661177, -60.3168476507067, 365.9332091966433), () => {
		switchPanorama('10.jpg');
	});
}

			if (panorama === '9.jpg') {
				addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(-293.07339203793, -132.61018844232657, -236.16570684355202), () => {
		showMedia(1, 'images/MINOTAURO.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(387.0916429170418, -43.68628439613278, 87.81659031651135), () => {
		switchPanorama('6.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(66.48019750164207, -32.56933199683897, -392.36856985576844), () => {
		switchPanorama('7.jpg');
	});
}

			if (panorama === '10.jpg') {
				addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(177.563221515011, -57.9769752931389, -352.7388094983716), () => {
		showMedia(1, 'images/CURUPIRA.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(-398.081037474445, -34.40859865240104, -4.691750422845324), () => {
		switchPanorama('8.jpg');
	});
}

			if (panorama === '11.jpg') {
				addHotspot('images/arrowdown.png', new THREE.Vector3(92.50994780230683, -63.55050716807061, 383.3438038386638), () => {
		switchPanorama('4.jpg');
	});
	addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(-8.982572384563166, -58.283108597084805, -394.98381804533955), () => {
		showMedia(1, 'images/DIOMEDES.jpg');
	});
	addHotspot('images/arrowup.png', new THREE.Vector3(-70.20944971434628, -42.30461654048234, 390.5694522442931), () => {
		switchPanorama('12.jpg');
	});
}

			if (panorama === '12.jpg') {
				addHotspot('images/arrowdown.png', new THREE.Vector3(-68.0449931201962, -47.06237941795926, -390.3266182235152), () => {
		switchPanorama('11.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(274.2633784834174, -33.47449841404553, -288.37909066210364), () => {
		switchPanorama('13.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(354.9491816113957, -42.78909841940116, 177.10825435681124), () => {
		switchPanorama('14.jpg');
	});
}

			if (panorama === '13.jpg') {
				addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(202.27093911981393, -45.34109511405553, -341.34593327725656), () => {
		showMedia(1, 'images/REIDELATA.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(-270.44819937208985, -29.377308069056717, -292.7229722006807), () => {
		switchPanorama('12.jpg');
	});
	addHotspot('images/chevronforward.png', new THREE.Vector3(-398.5987380765024, -32.035401430469655, 1.300224884182709), () => {
		switchPanorama('14.jpg');
	});
}

			if (panorama === '14.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(369.7333189786143, -50.80590256091113, 141.03019504802086), () => {
		switchPanorama('12.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(249.94197888711213, -26.41242104646303, -310.037835320907), () => {
		switchPanorama('15.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(-292.7329736225265, -31.623559049516214, -270.31043702017325), () => {
		switchPanorama('17.jpg');
	});
	addHotspot('images/arrowdown.png', new THREE.Vector3(-73.80580850905432, -68.85649371991444, -386.35982916747525), () => {
		switchPanorama('18.jpg');
	});
}

			if (panorama === '15.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-391.67794464162745, -41.275031598241625, 63.87916379221308), () => {
		switchPanorama('13.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(-332.5304059173015, -35.49522588083706, -217.9047214240513), () => {
		switchPanorama('14.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(288.3482811906406, -29.391630409405764, -274.75338420208027), () => {
		switchPanorama('16.jpg');
	});
}

			if (panorama === '16.jpg') {
				addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(-5.14549585172564, -62.54452086716903, -394.75023339322127), () => {
		showMedia(1, 'images/ROMÃOZINHO.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(281.38162651044047, -25.60740203028067, 281.84923541380084), () => {
		switchPanorama('15.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(-269.0337327744239, -28.54403913803524, 294.2042142228409), () => {
		switchPanorama('17.jpg');
	});
}

			if (panorama === '17.jpg') {
				addHotspot('images/white.png', new THREE.Vector3(-336.9197984026224, -35.822802268905804, -211.09291628691338), () => {
		switchPanorama('16.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(271.76684975924536, -33.48201175635487, -290.9115753638373), () => {
		switchPanorama('14.jpg');
	});
}

			if (panorama === '18.jpg') {
				addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(-7.283651320681845, -56.936755985710434, -395.2364715316063), () => {
		showMedia(1, 'images/BIBI.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(166.06759344498363, -37.77396989680021, 361.3512852132384), () => {
		switchPanorama('21.jpg');
	});
}

			if (panorama === '19.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(-384.1715872419469, -66.88630074773715, -86.92839607581386), () => {
		switchPanorama('20.jpg');
	});
	addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(392.15193733507533, -50.358864739507595, 54.10505016471277), () => {
		showMedia(1, 'images/JUQUINHA.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(216.23976608116305, -32.86394677772888, -334.00701534149295), () => {
		switchPanorama('7.jpg');
	});
}

			if (panorama === '20.jpg') {
				addHotspot('images/chevronforward.png', new THREE.Vector3(383.2322843076174, -86.24885722015131, -71.36322918631166), () => {
		switchPanorama('19.jpg');
	});
}

			if (panorama === '21.jpg') {
				addHotspot('images/arrowup.png', new THREE.Vector3(-312.82582076151647, -32.06094001504765, -246.13093060927173), () => {
		switchPanorama('14.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(-172.13681216902148, -37.438551089209845, -358.244375647005), () => {
		switchPanorama('18.jpg');
	});
	addHotspot('images/iconepointdinterrogationquestionjaune.png', new THREE.Vector3(271.72677056124394, -53.64467984274074, -287.4954298416622), () => {
		showMedia(1, 'images/DEUS.jpg');
	});
	addHotspot('images/white.png', new THREE.Vector3(86.42838641381672, -51.6951621291454, 386.5005005826705), () => {
		switchPanorama('1.jpg');
	});
}

/*panoramas-end*/
				
			}

			function switchPanorama(panoramaName) {
				overlay.style.pointerEvents = 'auto';
				overlay.style.opacity = '1';
				overlay.textContent = 'Loading...';

				const newTexture = new THREE.TextureLoader().load(`panoramas/${panoramaName}`, (tex) => {
					panoramaMesh.material.map = tex;
					panoramaMesh.material.needsUpdate = true;
					currentPanorama = panoramaName;
					loadHotspotsFor(currentPanorama);
					overlay.style.opacity = '0';
					overlay.style.pointerEvents = 'none';
				}, (xhr) => {
					const progress = (xhr.loaded / xhr.total) * 100;
					overlay.textContent = `Loading... ${progress.toFixed(0)}%`;
				});
			}

			function addHotspot(imageUrl, position, onClickCallback) {
				const textureLoader = new THREE.TextureLoader();
				textureLoader.load(imageUrl, (texture) => {
					const material = new THREE.SpriteMaterial({ map: texture });
					const sprite = new THREE.Sprite(material);
					sprite.position.copy(position);
					sprite.scale.set(40, 40, 1);
					sprite.userData = {
						onClick: onClickCallback,
						targetScale: 40
					};
					spriteHotspots.push(sprite);
					scene.add(sprite);
				});
			}

			function clearHotspots() {
				spriteHotspots.forEach(sprite => scene.remove(sprite));
				spriteHotspots = [];
			}

			function onPointerMove(event) {
				mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
				mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

				raycaster.setFromCamera(mouse, camera);
				const intersects = raycaster.intersectObjects(spriteHotspots);

				spriteHotspots.forEach(sprite => {
					sprite.userData.targetScale = 40;
				});

				if (intersects.length > 0) {
					intersects[0].object.userData.targetScale = 50;
				}
			}

			function onWindowResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize(window.innerWidth, window.innerHeight);
			}

			function animate() {
				requestAnimationFrame(animate);

				// Smooth transition FOV
				camera.fov += (targetFov - camera.fov) * 0.1;
				camera.updateProjectionMatrix();

				// Smooth hotspot scale animation
				spriteHotspots.forEach(sprite => {
					const currentScale = sprite.scale.x;
					const target = sprite.userData.targetScale || 40;
					const newScale = THREE.MathUtils.lerp(currentScale, target, 0.1);
					sprite.scale.set(newScale, newScale, 1);
				});

				controls.update();
				renderer.render(scene, camera);
			}

			// Klik pada hotspot
			document.addEventListener('click', function (event) {
				const mouseClick = new THREE.Vector2(
					(event.clientX / window.innerWidth) * 2 - 1,
					-(event.clientY / window.innerHeight) * 2 + 1
				);

				const clickRaycaster = new THREE.Raycaster();
				clickRaycaster.setFromCamera(mouseClick, camera);
				const intersects = clickRaycaster.intersectObjects(spriteHotspots);

				if (intersects.length > 0) {
					const clicked = intersects[0].object;
					if (clicked.userData.onClick) clicked.userData.onClick();
				}
			});
			
			
			
            
			
			
			function hideTemp(){
				$("#tmp").fadeOut();
				setTimeout(function(){
					$("#tmpcontent").html("");
				},1000);
			}
			
			function showMedia(type, content){
				switch(type){
					case 1 :
						//Image
						$("#tmpcontent").html("<img src='"+content+"' style='width: 100%;'>");
						$("#tmp").fadeIn();
						break;
					case 2 :
						//Video
						$("#tmpcontent").html("<video id='webvideo' controls autoplay style='width: 100%; height: 100%;'><source src='" +content+ "' type='video/mp4'> Your browser does not support the video tag. </video>");
						$("#tmp").fadeIn();
						break;
					case 3 :
						//Audio
						$("#tmpcontent").html("<audio controls style='width: 100%;'><source src='"+content+"' type='audio/ogg'>Your browser does not support the audio tag.</audio>");
						$("#tmp").fadeIn();
						break;
					case 4 :
						//PDF
						$("#tmpcontent").html("<iframe src='pdfjs/web/viewer.html?file=../../"+content+"' style='width: 100%; height: 99%;'></iframe>");
						$("#tmp").fadeIn();
						break;
				}
			}
			
			
			/*customjs*/

/*customjs-end*/
        </script>
	</body>
</html>